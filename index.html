<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>لعبة التطابق - Match 3</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f0f0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    #game {
      display: grid;
      grid-template-columns: repeat(8, 60px);
      grid-template-rows: repeat(8, 60px);
      gap: 5px;
    }
    .cell {
      width: 60px;
      height: 60px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 24px;
      font-weight: bold;
      border-radius: 8px;
      cursor: pointer;
      transition: transform 0.2s;
    }
    .cell:hover {
      transform: scale(1.1);
    }
    .type1 { background: #ff6666; color: white; }
    .type2 { background: #66ccff; color: white; }
    .type3 { background: #66ff66; color: white; }
    .type4 { background: #ffcc66; color: white; }
  </style>
</head>
<body>
  <div id="game"></div>

  <script>
    const game = document.getElementById("game");
    const types = ["type1","type2","type3","type4"];
    const size = 8;
    let grid = [];

    // إنشاء الشبكة
    function init() {
      grid = [];
      game.innerHTML = "";
      for (let r = 0; r < size; r++) {
        let row = [];
        for (let c = 0; c < size; c++) {
          let type = types[Math.floor(Math.random()*types.length)];
          let cell = document.createElement("div");
          cell.className = "cell " + type;
          cell.dataset.row = r;
          cell.dataset.col = c;
          cell.innerText = "★";
          cell.addEventListener("click", selectCell);
          game.appendChild(cell);
          row.push(cell);
        }
        grid.push(row);
      }
    }

    let first = null;
    function selectCell(e) {
      let cell = e.target;
      if (!first) {
        first = cell;
        cell.style.border = "3px solid black";
      } else {
        swap(first, cell);
        first.style.border = "none";
        first = null;
        checkMatches();
      }
    }

    function swap(c1, c2) {
      let tempClass = c1.className;
      c1.className = c2.className;
      c2.className = tempClass;
    }

    function checkMatches() {
      let matched = [];
      // تحقق من الصفوف
      for (let r = 0; r < size; r++) {
        for (let c = 0; c < size-2; c++) {
          let a = grid[r][c], b = grid[r][c+1], d = grid[r][c+2];
          if (a.className === b.className && b.className === d.className) {
            matched.push(a,b,d);
          }
        }
      }
      // تحقق من الأعمدة
      for (let c = 0; c < size; c++) {
        for (let r = 0; r < size-2; r++) {
          let a = grid[r][c], b = grid[r+1][c], d = grid[r+2][c];
          if (a.className === b.className && b.className === d.className) {
            matched.push(a,b,d);
          }
        }
      }
      matched.forEach(cell => {
        cell.innerText = "";
        cell.className = "cell " + types[Math.floor(Math.random()*types.length)];
      });
    }

    init();
  </script>
</body>
</html>
